<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Updated Title -->
    <title>SonicWave - Your Music Hub</title>
    <!-- Updated Description -->
    <meta name="description" content="SonicWave - Listen to your favorite music and podcasts.">

    <style>
        :root {
            /* Keep existing colors, they work well */
            --app-green: #1DB954;
            --app-light-grey: #b3b3b3;
            --app-medium-grey: #a7a7a7;
            --app-dark-grey: #282828;
            --app-darker-grey: #181818;
            --app-darkest-grey: #121212;
            --app-black: #000;
            --app-white: #fff;
            --app-error-red: #f15e6c;
            --app-link-subtle: #a7a7a7;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            /* Use a slightly more modern font stack if available */
            font-family: "CircularSp", system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: var(--app-black);
            color: var(--app-white);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        a {
            color: var(--app-light-grey);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
            color: var(--app-white);
        }

        button {
            font-family: inherit;
            cursor: pointer;
            border: none;
            border-radius: 500px;
            background: none;
            color: inherit;
            padding: 0;
        }

        img {
            max-width: 100%;
            display: block;
        }

        svg {
            display: block;
        }

        .hidden {
            display: none !important;
        }

        .icon {
            width: 1em;
            height: 1em;
            stroke-width: 2;
            fill: none;
            stroke: currentColor;
        }

        .web-player-container {
            display: flex;
            height: 100vh;
            background-color: var(--app-black);
            padding: 8px;
            gap: 8px;
        }

        body.logged-in .web-player-container {
            height: 100vh;
        }

        body:not(.logged-in) .web-player-container {
            height: calc(100vh - 90px);
        }

        .sidebar {
            background-color: var(--app-black);
            width: 300px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            transition: width 0.3s ease;
        }

        /* Section for the logo */
        .logo-section {
            background-color: var(--app-darkest-grey);
            border-radius: 8px;
            padding: 16px 20px; /* Adjust padding */
        }

        .app-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--app-white);
            text-decoration: none;
        }

        .app-logo:hover {
            text-decoration: none;
            color: var(--app-white); /* Keep color on hover */
        }

        .logo-svg {
            width: 32px; /* Adjust size */
            height: 32px;
            fill: var(--app-green); /* Use brand color */
            flex-shrink: 0;
        }

        .logo-text {
            font-size: 1.2rem; /* Slightly larger */
            font-weight: bold;
            transition: opacity 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
        }
        /* --- End Logo Styles --- */


        .sidebar-section {
            background-color: var(--app-darkest-grey);
            border-radius: 8px;
            padding: 12px 20px;
        }

        /* Adjust nav-top margin */
        .nav-top {
            padding-top: 16px; /* Add space */
            padding-bottom: 16px; /* Add space */
        }

        .nav-top ul {
            list-style: none;
        }

        .nav-top li {
            margin-bottom: 18px; /* Slightly increase spacing */
        }

        .nav-top a {
            color: var(--app-light-grey);
            font-weight: bold;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: color 0.2s ease;
        }

        .nav-top a:hover {
            color: var(--app-white);
            text-decoration: none;
        }

        .nav-top .nav-icon {
            font-size: 1.5rem;
            width: 24px;
            height: 24px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .nav-top .nav-icon svg {
            width: 100%;
            height: 100%;
            fill: currentColor; /* Ensure nav icons use current color */
        }

        .nav-top .nav-text {
            transition: opacity 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
        }

        .library {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .library-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            color: var(--app-light-grey);
            font-weight: bold;
            padding: 0 10px;
            margin: 0 -10px 16px -10px;
        }

        .library-header a {
            display: flex;
            align-items: center;
            gap: 10px;
            color: inherit;
        }

        .library-header a:hover {
            color: var(--app-white);
            text-decoration: none;
        }

        .library-header .nav-icon {
            font-size: 1.4rem;
            width: 24px;
            height: 24px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

         .library-header .nav-icon svg {
             width: 100%;
             height: 100%;
             fill: currentColor; /* Ensure library icon uses current color */
         }

        .library-header button {
            background: none;
            border: none;
            color: var(--app-light-grey);
            font-size: 1.5rem;
            padding: 5px;
            transition: color 0.2s ease;
            flex-shrink: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .library-header button:hover {
            color: var(--app-white);
        }

        .library-header button svg {
            width: 20px;
            height: 20px;
            fill: currentColor; /* Ensure plus icon uses current color */
        }

        .library-content {
            overflow-y: auto;
            flex-grow: 1;
            padding: 0 10px;
            scrollbar-width: thin;
            scrollbar-color: var(--app-medium-grey) transparent;
        }

        .library-content::-webkit-scrollbar {
            width: 8px;
        }

        .library-content::-webkit-scrollbar-track {
            background: transparent;
        }

        .library-content::-webkit-scrollbar-thumb {
            background-color: var(--app-medium-grey);
            border-radius: 20px;
            border: 2px solid transparent;
            background-clip: content-box;
        }

        #library-items {
            margin-top: 16px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .library-item {
            display: block;
            color: var(--app-light-grey);
            font-size: 0.9rem;
            padding: 5px 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            transition: color 0.2s ease;
        }

        .library-item:hover {
            color: var(--app-white);
            text-decoration: none;
        }

        .cta-box {
            background-color: #242424;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
        }

        .cta-box h3 {
            font-size: 1rem;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .cta-box p {
            font-size: 0.875rem;
            margin-bottom: 16px;
            font-weight: normal;
            color: var(--app-light-grey);
        }

        .cta-button {
            background-color: var(--app-white);
            color: var(--app-black);
            padding: 8px 16px;
            font-weight: bold;
            font-size: 0.875rem;
            transition: transform 0.1s ease;
        }

        .cta-button:hover {
            transform: scale(1.05);
            color: var(--app-black);
            text-decoration: none;
        }

        .sidebar-footer {
            margin-top: auto;
            padding: 16px 20px 0;
        }

        .sidebar-footer ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 8px 16px;
            margin-bottom: 16px;
        }

        .sidebar-footer li a {
            font-size: 0.6875rem;
            color: var(--app-medium-grey);
        }

        .sidebar-footer li a:hover {
            color: var(--app-medium-grey);
            text-decoration: underline;
        }

        .sidebar-footer .cookies-link {
            font-size: 0.6875rem;
            color: var(--app-medium-grey);
            display: block;
            margin-bottom: 20px;
        }

        .lang-button {
            background-color: transparent;
            border: 1px solid #727272;
            color: var(--app-white);
            padding: 6px 12px;
            font-size: 0.875rem;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            transition: border-color 0.2s ease, transform 0.1s ease;
        }

        .lang-button:hover {
            border-color: var(--app-white);
            transform: scale(1.05);
            text-decoration: none;
        }

        .lang-icon {
            font-size: 1rem;
            width: 16px;
            height: 16px;
        }

        .lang-icon svg {
            width: 100%;
            height: 100%;
        }

        .main-content {
            flex: 1;
            background: linear-gradient(to bottom, #2a2a2a, var(--app-darkest-grey) 350px);
            border-radius: 8px;
            overflow-y: auto;
            padding-bottom: 50px;
            scrollbar-width: thin;
            scrollbar-color: var(--app-medium-grey) transparent;
        }

        .main-content::-webkit-scrollbar {
            width: 12px;
        }

        .main-content::-webkit-scrollbar-track {
            background: transparent;
        }

        .main-content::-webkit-scrollbar-thumb {
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 20px;
        }

        .main-content:hover::-webkit-scrollbar-thumb {
            background-color: rgba(255, 255, 255, 0.5);
        }

        #main-view-container {
            padding-bottom: 50px;
        }

        .main-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            background-color: rgba(10, 10, 10, 0.6);
            position: sticky;
            top: 0;
            z-index: 10;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px); /* Safari */
        }

        .header-nav {
            display: flex;
            gap: 12px;
        }

        .nav-arrow {
            background-color: rgba(0, 0, 0, 0.7);
            color: var(--app-white);
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: not-allowed;
            opacity: 0.8;
        }

        .nav-arrow svg {
            width: 20px;
            height: 20px;
            fill: currentColor; /* Ensure arrows use current color */
        }

        .search-bar-container {
            flex-grow: 0;
            min-width: 200px;
            max-width: 350px;
            position: relative;
            margin-left: clamp(10px, 5vw, 50px);
        }

        .search-bar {
            width: 100%;
            padding: 10px 15px 10px 40px;
            border-radius: 500px;
            border: none;
            background-color: #242424;
            color: var(--app-white);
            font-size: 0.875rem;
        }

        .search-bar::placeholder {
            color: #757575;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            color: var(--app-light-grey);
            pointer-events: none;
        }

        .search-icon svg {
            width: 100%;
            height: 100%;
            fill: currentColor; /* Ensure search icon uses current color */
        }

        .header-user-controls {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-shrink: 0;
        }

        .header-link {
            color: var(--app-medium-grey);
            font-weight: bold;
            font-size: 1rem;
            transition: color 0.2s ease, transform 0.1s ease;
            white-space: nowrap;
            display: block;
        }

        .header-link:hover {
            color: var(--app-white);
            transform: scale(1.05);
            text-decoration: none;
        }

        .header-link.install-app {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .install-icon {
            font-size: 1.2rem;
            width: 20px;
            height: 20px;
        }

        .install-icon svg {
            width: 100%;
            height: 100%;
            fill: currentColor; /* Ensure install icon uses current color */
        }

        .install-app-text {
            display: inline;
        }

        .signup-button,
        .header-login-button {
            background-color: transparent;
            color: var(--app-medium-grey);
            font-weight: bold;
            font-size: 1rem;
            padding: 8px 20px;
            transition: color 0.2s ease, transform 0.1s ease;
            white-space: nowrap;
            display: block;
        }

        .signup-button:hover,
        .header-login-button:hover {
            color: var(--app-white);
            transform: scale(1.05);
            text-decoration: none;
        }

        .login-button-main {
            background-color: var(--app-white);
            color: var(--app-black);
            font-weight: bold;
            padding: 12px 30px;
            font-size: 1rem;
            transition: transform 0.1s ease;
            white-space: nowrap;
            display: block;
            border-radius: 500px;
        }

        .login-button-main:hover {
            transform: scale(1.05);
            color: var(--app-black);
            text-decoration: none;
        }

        .profile-button {
            background-color: var(--app-dark-grey);
            color: var(--app-white);
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            position: relative;
        }

        .profile-button svg {
            width: 20px;
            height: 20px;
            fill: currentColor; /* Ensure profile icon uses current color */
        }

        .profile-dropdown {
            position: absolute;
            top: 110%;
            right: 0;
            background-color: var(--app-dark-grey);
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            z-index: 100;
            padding: 4px 0;
            min-width: 160px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: opacity 0.2s ease, transform 0.2s ease, visibility 0.2s ease;
        }

        .profile-button:hover .profile-dropdown,
        .profile-dropdown:hover {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .profile-dropdown a {
            display: block;
            padding: 10px 15px;
            font-size: 0.9rem;
            color: var(--app-light-grey);
            text-decoration: none;
            white-space: nowrap;
        }

        .profile-dropdown a:hover {
            background-color: #3e3e3e;
            color: var(--app-white);
            text-decoration: none;
        }

        body:not(.logged-in) .profile-button {
            display: none;
        }

        body.logged-in .signup-button,
        body.logged-in .header-login-button,
        body.logged-in .login-button-main {
            display: none;
        }

        .content-section {
            padding: 16px 24px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
        }

        .section-title:hover {
            text-decoration: underline;
        }

        .show-all-link {
            font-size: 0.875rem;
            font-weight: bold;
            color: var(--app-light-grey);
        }

        .show-all-link:hover {
            color: var(--app-white);
        }

        .card-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 24px;
        }

        .card {
            background-color: var(--app-darker-grey);
            border-radius: 8px;
            padding: 16px;
            transition: background-color 0.3s ease, transform 0.1s ease-out;
            position: relative;
            cursor: pointer;
            overflow: hidden;
        }

        .card:hover {
            background-color: var(--app-dark-grey);
            transform: translateY(-2px);
        }

        .card:hover .play-button {
            opacity: 1;
            transform: translateY(0);
        }

        .card-image {
            width: 100%;
            border-radius: 4px;
            margin-bottom: 16px;
            aspect-ratio: 1 / 1;
            object-fit: cover;
            background-color: var(--app-dark-grey);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
        }

        .card-title {
            font-size: 1rem;
            font-weight: bold;
            margin-bottom: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: var(--app-white);
        }

        .card-description {
            font-size: 0.875rem;
            color: var(--app-light-grey);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            line-height: 1.4;
            height: calc(0.875rem * 1.4 * 2);
        }

        .card-description .explicit-icon {
            background-color: rgba(179, 179, 179, 0.6);
            color: var(--app-darkest-grey);
            font-size: 0.6rem;
            font-weight: bold;
            padding: 1px 3px;
            border-radius: 2px;
            margin-right: 5px;
            vertical-align: middle;
        }

        .artist-card .card-image {
            border-radius: 50%;
        }

        .artist-card .card-description {
            height: auto;
            -webkit-line-clamp: 1;
            text-align: left;
        }

        .artist-card .card-title {
            margin-bottom: 8px;
        }

        .podcast-card .card-image {
            border-radius: 8px;
        }

        .podcast-card .card-description {
            -webkit-line-clamp: 1;
            height: calc(0.875rem * 1.4 * 1);
        }

        .play-button {
            position: absolute;
            bottom: 85px;
            right: 20px;
            background-color: var(--app-green);
            color: var(--app-black);
            border-radius: 50%;
            width: 48px;
            height: 48px;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            pointer-events: none; /* Changed from auto */
        }

        /* Allow clicking the card to trigger play */
        .card:hover .play-button {
           pointer-events: none; /* Keep play button from intercepting card click */
        }

        .play-button svg {
            width: 24px;
            height: 24px;
            fill: var(--app-black);
            stroke: none;
            margin-left: 3px; /* Adjust play icon for centering */
        }

        .artist-card .play-button {
            bottom: 95px;
        }

        .podcast-card .play-button {
            bottom: 85px;
        }

        .bottom-banner {
            background-image: linear-gradient(to right, #ae2896, #509bf5);
            padding: 16px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            z-index: 20;
            height: 90px;
            gap: 20px;
        }

        body.logged-in .bottom-banner {
            display: none;
        }

        .banner-content {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            overflow: hidden;
        }

        .banner-text h3 {
            font-size: 0.8rem;
            font-weight: normal;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
            white-space: nowrap;
        }

        .banner-text p {
            font-size: 0.95rem;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .now-playing-area {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            min-height: 1.2em; /* Ensure space is reserved */
        }

        .now-playing-area strong {
            color: var(--app-white);
            font-weight: 600;
        }

        .banner-button {
            background-color: var(--app-white);
            color: #2a6cb4;
            padding: 14px 32px;
            font-weight: bold;
            font-size: 1rem;
            transition: transform 0.1s ease;
            white-space: nowrap;
            flex-shrink: 0;
            border-radius: 500px;
        }

        .banner-button:hover {
            transform: scale(1.05);
            color: #2a6cb4;
            text-decoration: none;
        }

        .modal-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(3px);
             -webkit-backdrop-filter: blur(3px); /* Safari */
        }

        .modal-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        .modal-content {
            background-color: var(--app-black);
            padding: 32px;
            border-radius: 8px;
            color: var(--app-white);
            max-width: 450px;
            width: 90%;
            text-align: center;
            position: relative;
            transform: scale(0.95);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
        }

        /* Style for modal brand name */
        .modal-brand-name {
             font-size: 1.5rem;
             font-weight: 700;
             color: var(--app-green); /* Use brand color */
             margin-bottom: 16px;
             letter-spacing: -0.02em;
        }

        .modal-content h2 {
            margin-bottom: 24px; /* Reduced margin */
            font-size: 1.8rem; /* Slightly smaller */
            font-weight: 700;
            letter-spacing: -0.04em;
        }

        .modal-close-btn {
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: none;
            color: var(--app-medium-grey);
            font-size: 1.8rem;
            line-height: 1;
            cursor: pointer;
            padding: 5px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.2s ease;
        }

        .modal-close-btn svg {
            width: 24px;
            height: 24px;
            fill: currentColor; /* Ensure close icon uses current color */
        }

        .modal-close-btn:hover {
            color: var(--app-white);
        }

        .modal-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 24px;
            text-align: left;
        }

        .modal-form label {
            font-size: 0.875rem;
            font-weight: 700;
            margin-bottom: 8px;
            display: block;
        }

        .modal-form input[type="email"],
        .modal-form input[type="password"] {
            width: 100%;
            padding: 14px;
            border-radius: 4px;
            border: 1px solid transparent;
            background-color: var(--app-darkest-grey);
            color: var(--app-white);
            font-size: 1rem;
            outline: none;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
            border: 1px solid #727272;
        }

        .modal-form input[type="email"]:hover,
        .modal-form input[type="password"]:hover {
            border-color: var(--app-medium-grey);
        }

        .modal-form input[type="email"]:focus,
        .modal-form input[type="password"]:focus {
            border-color: var(--app-white);
            box-shadow: 0 0 0 1px var(--app-white);
            background-color: #1F1F1F;
        }

        .modal-form input::placeholder {
            color: var(--app-medium-grey);
        }

        .modal-submit-button {
            width: 100%;
            background-color: var(--app-green);
            color: var(--app-black);
            padding: 14px 32px;
            font-weight: 700;
            font-size: 1rem;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            transition: transform 0.1s ease, background-color 0.2s ease;
            border-radius: 500px;
            margin-top: 16px;
        }

        .modal-submit-button:hover {
            transform: scale(1.03);
            background-color: #1ed760;
        }

        .modal-error {
            color: var(--app-error-red);
            font-size: 0.875rem;
            margin-top: 8px;
            margin-bottom: 8px;
            text-align: center;
            min-height: 1.2em;
        }

        .modal-divider {
            display: flex;
            align-items: center;
            text-align: center;
            margin: 32px 0;
            color: var(--app-medium-grey);
            font-size: 0.75rem;
            font-weight: bold;
            text-transform: uppercase;
        }

        .modal-divider::before,
        .modal-divider::after {
            content: '';
            flex: 1;
            border-bottom: 1px solid var(--app-dark-grey);
        }

        .modal-divider:not(:empty)::before {
            margin-right: .75em;
        }

        .modal-divider:not(:empty)::after {
            margin-left: .75em;
        }

        .modal-social-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 32px;
        }

        .modal-social-button {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--app-medium-grey);
            color: var(--app-white);
            font-weight: bold;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: border-color 0.2s ease;
            background-color: transparent;
        }

        .modal-social-button:hover {
            border-color: var(--app-white);
        }

        .modal-social-button svg {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        .modal-switch-link {
            margin-top: 24px;
            font-size: 1rem;
            color: var(--app-link-subtle);
        }

        .modal-switch-link a {
            color: var(--app-white);
            font-weight: bold;
        }

        .modal-switch-link a:hover {
            color: var(--app-green);
        }

        @media (max-width: 1024px) {
            .sidebar { width: 240px; }
            .card-container { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 16px; }
            .play-button { width: 40px; height: 40px; bottom: 75px; right: 15px; }
            .play-button svg { width: 20px; height: 20px; }
            .artist-card .play-button { bottom: 85px; }
        }

        @media (max-width: 768px) {
            .web-player-container { gap: 5px; padding: 5px; }
            .sidebar { width: 72px; }
            /* Hide text elements in collapsed sidebar */
            .logo-text, /* Hide logo text */
            .nav-top .nav-text,
            .library-header .nav-text,
            .sidebar-footer ul,
            .sidebar-footer .cookies-link,
            .lang-button span:not(.lang-icon),
            .library-item { opacity: 0; width: 0; pointer-events: none; display: none; }

            .logo-section { padding: 12px 10px; } /* Adjust logo padding */
            .app-logo { justify-content: center; gap: 0; } /* Center logo icon */
            .logo-svg { width: 28px; height: 28px; } /* Slightly smaller logo icon */

            .nav-top a, .library-header a { gap: 0; justify-content: center; }
            .sidebar-section { padding: 12px 10px; }
            .library-header { justify-content: center; margin-bottom: 10px; padding: 0 5px; }
            .library-header a { margin-right: 5px; }
            .cta-box { display: none; }
            .lang-button { padding: 6px; font-size: 0; width: 40px; height: 40px; justify-content: center; gap: 0; }
            .lang-icon { margin: 0; width: 20px; height: 20px; }
            .main-header { padding: 10px 16px; }
            .search-bar-container { margin-left: 10px; max-width: 250px; }
            .header-link.install-app .install-app-text { display: none; }
            .install-icon { margin-right: 0; }
            .login-button-main { padding: 10px 20px; font-size: 0.9rem; }
            .signup-button, .header-login-button { padding: 8px 15px; font-size: 0.9rem; }
            .content-section { padding: 10px 16px; }
            .section-title { font-size: 1.2rem; }
            .show-all-link { font-size: 0.75rem; }
            .card-container { grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 12px; }
            .card { padding: 12px; }
            .card-title { font-size: 0.9rem; margin-bottom: 4px; }
            .card-description { font-size: 0.75rem; -webkit-line-clamp: 1; height: calc(0.75rem * 1.4 * 1); }
            .play-button { width: 36px; height: 36px; bottom: 65px; right: 10px; }
            .play-button svg { width: 18px; height: 18px; }
            .artist-card .play-button { bottom: 75px; }
            .bottom-banner { height: auto; flex-direction: column; align-items: stretch; padding: 10px 16px; gap: 10px; text-align: center; }
            .banner-content { order: 1; }
            .banner-button { order: 2; width: 100%; padding: 12px; }
            .now-playing-area { text-align: center; }
            .modal-content h2 { font-size: 1.6rem; }
            .modal-brand-name { font-size: 1.3rem; }
        }

        @media (max-width: 480px) {
            .search-bar-container { display: none; }
            .header-user-controls { gap: 8px; }
            .login-button-main { padding: 8px 15px; }
            .signup-button, .header-login-button { display: none; } /* Hide text sign up/login on smallest screens */
            .card-container { grid-template-columns: repeat(2, 1fr); gap: 10px; }
            .profile-button { margin-left: auto; }
            .modal-content h2 { font-size: 1.4rem; }
            .modal-brand-name { font-size: 1.2rem; }
        }

        .card.is-playing {
            box-shadow: 0 0 0 2px var(--app-green), 0 4px 10px rgba(0,0,0,0.3); /* Added subtle shadow */
            background-color: #282828; /* Slightly lighter than hover */
        }

        .card.is-playing .card-title {
            color: var(--app-green);
        }
    </style>
</head>
<body>

    <div class="web-player-container">
        <aside class="sidebar">
            <!-- Logo Section -->
            <div class="logo-section">
                <a href="#" class="app-logo" id="logo-link">
                    <!-- Simple SVG Logo -->
                    <svg class="logo-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20,75 L20,25 C20,20 25,15 30,15 L70,15 C75,15 80,20 80,25 L80,75 C80,80 75,85 70,85 L30,85 C25,85 20,80 20,75 Z M40,65 L40,35 M50,70 L50,30 M60,60 L60,40"
                              stroke="currentColor" stroke-width="8" stroke-linecap="round" fill="none"/>
                        <circle cx="30" cy="50" r="5" fill="currentColor"/>
                        <circle cx="70" cy="50" r="5" fill="currentColor"/>
                    </svg>
                    <span class="logo-text">SonicWave</span>
                </a>
            </div>
            <!-- Navigation Section -->
            <div class="sidebar-section nav-top">
                <ul>
                    <li><a href="#" id="nav-home"><span class="nav-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon"><path d="M12.71 2.042a1 1 0 0 0-1.42 0L2.05 11.293a1 1 0 0 0-.002 1.414l.002.002 1.414 1.414a1 1 0 0 0 1.414 0L12 7.828l7.121 7.121a1 1 0 0 0 1.414 0l1.414-1.414a1 1 0 0 0 0-1.414L12.71 2.042zM18 10.172V21h-4v-7a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v7H6V10.172l6-6 6 6z"></path></svg></span><span class="nav-text">Home</span></a></li>
                    <li><a href="#" id="nav-search-btn"><span class="nav-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon"><path d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 0 0 1.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 0 0-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 0 0 5.34-1.48l.27.28v.79l4.25 4.25a1 1 0 1 0 1.41-1.41L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg></span><span class="nav-text">Search</span></a></li>
                </ul>
            </div>
            <!-- Library Section -->
            <div class="sidebar-section library">
                <div class="library-header">
                    <a href="#" id="nav-library"><span class="nav-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon"><path d="M3 22a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h14.17a3.001 3.001 0 0 1 2.12.879l2.829 2.828A3 3 0 0 1 23 7.828V21a1 1 0 0 1-1 1H3zm1-2h16V8.828a1 1 0 0 0-.293-.707l-2.828-2.828A1 1 0 0 0 16.172 5H4v15zM10 9H8v7h2V9zm6 0h-2v7h2V9z"></path></svg></span><span class="nav-text">Your Library</span></a>
                    <button id="add-playlist-btn" title="Create playlist or folder"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon"><path d="M19 11h-6V5a1 1 0 0 0-2 0v6H5a1 1 0 0 0 0 2h6v6a1 1 0 0 0 2 0v-6h6a1 1 0 0 0 0-2z"></path></svg></button>
                </div>
                <div class="library-content">
                    <div class="cta-box">
                        <h3>Create your first playlist</h3>
                        <p>It's easy, we'll help you</p>
                        <button class="cta-button" id="create-playlist-btn-cta">Create playlist</button>
                    </div>
                    <div class="cta-box">
                        <h3>Let's find some podcasts to follow</h3>
                        <p>We'll keep you updated on new episodes</p>
                        <button class="cta-button" id="browse-podcasts-btn">Browse podcasts</button>
                    </div>
                    <div id="library-items"></div>
                </div>
                <div class="sidebar-footer">
                    <ul>
                        <li><a href="#">Legal</a></li>
                        <li><a href="#">Safety & Privacy Center</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Cookies</a></li>
                        <li><a href="#">About Ads</a></li>
                        <li><a href="#">Accessibility</a></li>
                    </ul>
                    <a href="#" class="cookies-link">Cookies</a>
                    <button class="lang-button" id="lang-btn"><span class="lang-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg></span><span>English</span></button>
                </div>
            </div>
        </aside>

        <main class="main-content">
            <header class="main-header">
                <div class="header-nav">
                    <button class="nav-arrow" title="Go back" disabled><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg></button>
                    <button class="nav-arrow" title="Go forward" disabled><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button>
                </div>
                <div class="search-bar-container">
                     <span class="search-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon"><path d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 0 0 1.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 0 0-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 0 0 5.34-1.48l.27.28v.79l4.25 4.25a1 1 0 1 0 1.41-1.41L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg></span>
                     <input type="text" class="search-bar" id="search-input" placeholder="What do you want to play?">
                </div>
                <div class="header-user-controls">
                    <a href="#" class="header-link install-app" id="install-app-link"><span class="install-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"></path></svg></span><span class="install-app-text">Install App</span></a>
                    <button class="signup-button" id="signup-btn-header">Sign up</button>
                    <button class="login-button-main" id="login-btn-header">Log in</button>
                    <button class="profile-button" id="profile-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg>
                        <div class="profile-dropdown">
                            <a href="#" id="logout-link">Log out</a>
                        </div>
                    </button>
                </div>
            </header>
            <div id="main-view-container"></div>
        </main>
    </div>

    <footer class="bottom-banner">
        <div class="banner-content">
            <div class="banner-text">
                <!-- Updated Banner Text -->
                <h3>Preview SonicWave</h3>
                <p>Sign up to get unlimited songs and podcasts with occasional ads. No credit card needed.</p>
            </div>
            <div class="now-playing-area" id="now-playing">Click a song or artist to "play"</div>
        </div>
        <button class="banner-button" id="signup-btn-footer">Sign up free</button>
    </footer>

    <!-- Login Modal -->
    <div class="modal-overlay hidden" id="login-modal">
        <div class="modal-content">
            <button class="modal-close-btn" data-close-modal><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon close-icon"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></button>
            <!-- Added Brand Name -->
            <div class="modal-brand-name">SonicWave</div>
            <h2>Log in to continue</h2>
            <div class="modal-social-buttons">
                <button class="modal-social-button"><svg viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg> Continue with Google</button>
                <button class="modal-social-button"><svg viewBox="0 0 24 24"><path d="M12 2C6.477 2 2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.879V14.89h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v7.046C18.343 21.128 22 16.991 22 12c0-5.523-4.477-10-10-10z" fill="#1877F2"/></svg> Continue with Facebook</button>
            </div>
            <div class="modal-divider">OR</div>
            <form id="login-form" class="modal-form">
                <div class="modal-error" id="login-error"></div>
                <label for="login-email">Email or username</label>
                <input type="email" id="login-email" name="email" placeholder="Email or username" required>
                <label for="login-password">Password</label>
                <input type="password" id="login-password" name="password" placeholder="Password" required>
                <button type="submit" class="modal-submit-button">Log In</button>
            </form>
            <p class="modal-switch-link">Don't have an account? <a href="#" id="switch-to-signup">Sign up for SonicWave</a></p>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal-overlay hidden" id="signup-modal">
        <div class="modal-content">
            <button class="modal-close-btn" data-close-modal><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon close-icon"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></button>
            <!-- Added Brand Name -->
            <div class="modal-brand-name">SonicWave</div>
            <h2>Sign up to start listening</h2>
            <div class="modal-social-buttons">
                <button class="modal-social-button"><svg viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg> Continue with Google</button>
                <button class="modal-social-button"><svg viewBox="0 0 24 24"><path d="M12 2C6.477 2 2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.879V14.89h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v7.046C18.343 21.128 22 16.991 22 12c0-5.523-4.477-10-10-10z" fill="#1877F2"/></svg> Continue with Facebook</button>
            </div>
            <div class="modal-divider">OR</div>
            <form id="signup-form" class="modal-form">
                <div class="modal-error" id="signup-error"></div>
                <label for="signup-email">What's your email?</label>
                <input type="email" id="signup-email" name="email" placeholder="Enter your email." required>
                <label for="signup-password">Create a password</label>
                <input type="password" id="signup-password" name="password" placeholder="Create a password." required minlength="8">
                <button type="submit" class="modal-submit-button">Sign Up</button>
            </form>
            <p class="modal-switch-link">Already have an account? <a href="#" id="switch-to-login">Log in here</a></p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Keep existing variable declarations...
            const loginBtnHeader = document.getElementById('login-btn-header');
            const signupBtnHeader = document.getElementById('signup-btn-header');
            const signupBtnFooter = document.getElementById('signup-btn-footer');
            const profileBtn = document.getElementById('profile-btn');
            const logoutLink = document.getElementById('logout-link');
            const navHomeBtn = document.getElementById('nav-home');
            const navSearchBtn = document.getElementById('nav-search-btn');
            const logoLink = document.getElementById('logo-link'); // Added logo link
            const addPlaylistBtn = document.getElementById('add-playlist-btn');
            const createPlaylistCtaBtn = document.getElementById('create-playlist-btn-cta');
            const browsePodcastsCtaBtn = document.getElementById('browse-podcasts-btn');
            const libraryItemsContainer = document.getElementById('library-items');
            const loginModal = document.getElementById('login-modal');
            const signupModal = document.getElementById('signup-modal');
            const loginForm = document.getElementById('login-form');
            const signupForm = document.getElementById('signup-form');
            const loginError = document.getElementById('login-error');
            const signupError = document.getElementById('signup-error');
            const closeButtons = document.querySelectorAll('[data-close-modal]');
            const switchToSignupLink = document.getElementById('switch-to-signup');
            const switchToLoginLink = document.getElementById('switch-to-login');
            const searchInput = document.getElementById('search-input');
            const nowPlayingArea = document.getElementById('now-playing');
            const mainContentArea = document.querySelector('.main-content');
            const mainViewContainer = document.getElementById('main-view-container');
            const body = document.body;
            let playlists = [];
            let playlistCounter = 0;

            // Keep existing Local Storage keys...
            const LS_USER_KEY = 'sonicWaveUser'; // Changed key prefix
            const LS_LOGGED_IN_KEY = 'isSonicWaveLoggedIn'; // Changed key prefix
            const LS_PLAYLISTS_KEY = 'sonicWavePlaylists'; // Changed key prefix
            const LS_COUNTER_KEY = 'sonicWavePlaylistCounter'; // Changed key prefix

            // --- Keep existing functions (openModal, closeModal, clearModalErrors, renderUI, checkLoginStatus, handleSignup, handleLogin, handleLogout, loadPlaylists, savePlaylists, createPlaylistElement, renderPlaylists, handleCreatePlaylist) ---
            // No changes needed to the core logic of these functions

            function openModal(modal) {
                if (!modal) return;
                modal.classList.remove('hidden');
                requestAnimationFrame(() => {
                    modal.classList.add('active');
                });
            }

            function closeModal(modal) {
                if (!modal) return;
                modal.classList.remove('active');
                modal.addEventListener('transitionend', () => {
                    modal.classList.add('hidden');
                    clearModalErrors();
                }, { once: true });
            }

            function clearModalErrors() {
                if (loginError) loginError.textContent = '';
                if (signupError) signupError.textContent = '';
            }

            function renderUI(isLoggedIn) {
                body.classList.toggle('logged-in', isLoggedIn);
            }

            function checkLoginStatus() {
                const isLoggedIn = !!localStorage.getItem(LS_LOGGED_IN_KEY);
                renderUI(isLoggedIn);
            }

            function handleSignup(event) {
                event.preventDefault();
                signupError.textContent = '';
                const emailInput = signupForm.querySelector('#signup-email');
                const passwordInput = signupForm.querySelector('#signup-password');
                const email = emailInput.value.trim();
                const password = passwordInput.value;
                if (!email || !password) {
                    signupError.textContent = 'Please fill in all fields.';
                    return;
                }
                if (password.length < 8) {
                    signupError.textContent = 'Password must be at least 8 characters.';
                    return;
                }
                localStorage.setItem(LS_USER_KEY, email);
                localStorage.setItem(LS_LOGGED_IN_KEY, 'true');
                signupForm.reset();
                closeModal(signupModal);
                renderUI(true);
                 renderHomeView(); // Go home after signup
                 mainContentArea.scrollTop = 0; // Scroll to top
            }

            function handleLogin(event) {
                event.preventDefault();
                loginError.textContent = '';
                const emailInput = loginForm.querySelector('#login-email');
                const passwordInput = loginForm.querySelector('#login-password');
                const email = emailInput.value.trim();
                const password = passwordInput.value;
                const storedUser = localStorage.getItem(LS_USER_KEY);
                if (!email || !password) {
                    loginError.textContent = 'Please enter email and password.';
                    return;
                }
                // Simple validation: check if email matches stored user (no real password check here)
                if (storedUser && email === storedUser) {
                    localStorage.setItem(LS_LOGGED_IN_KEY, 'true');
                    loginForm.reset();
                    closeModal(loginModal);
                    renderUI(true);
                    renderHomeView(); // Go home after login
                    mainContentArea.scrollTop = 0; // Scroll to top
                } else {
                    loginError.textContent = 'Incorrect email or password.';
                }
            }

            function handleLogout(event) {
                event.preventDefault();
                localStorage.removeItem(LS_USER_KEY);
                localStorage.removeItem(LS_LOGGED_IN_KEY);
                renderUI(false);
                const dropdown = profileBtn.querySelector('.profile-dropdown');
                if (dropdown) dropdown.style.visibility = 'hidden'; // Hide dropdown immediately
                renderHomeView(); // Go home after logout
                 mainContentArea.scrollTop = 0; // Scroll to top
            }

            function loadPlaylists() {
                const storedPlaylists = localStorage.getItem(LS_PLAYLISTS_KEY);
                const storedCounter = localStorage.getItem(LS_COUNTER_KEY);
                if (storedPlaylists) {
                    playlists = JSON.parse(storedPlaylists);
                    playlistCounter = storedCounter ? parseInt(storedCounter, 10) : playlists.length;
                    renderPlaylists();
                } else {
                    playlists = [];
                    playlistCounter = 0;
                }
            }

            function savePlaylists() {
                localStorage.setItem(LS_PLAYLISTS_KEY, JSON.stringify(playlists));
                localStorage.setItem(LS_COUNTER_KEY, playlistCounter.toString());
            }

             function createPlaylistElement(playlistName) {
                 const playlistLink = document.createElement('a');
                 playlistLink.href = '#';
                 playlistLink.className = 'library-item';
                 playlistLink.textContent = playlistName;
                 playlistLink.title = playlistName; // Add title for tooltip on hover/focus
                 playlistLink.addEventListener('click', (e) => {
                     e.preventDefault();
                     // In a real app, you'd navigate to the playlist view here
                     console.log(`Navigate to playlist: ${playlistName}`);
                     // Example: Update main view to show playlist content
                     mainViewContainer.innerHTML = `<section class="content-section"><h1 class="section-title">${playlistName}</h1><p>Playlist content for ${playlistName} would go here.</p></section>`;
                     mainContentArea.scrollTop = 0; // Scroll to top
                 });
                 return playlistLink;
             }

             function renderPlaylists() {
                 if (!libraryItemsContainer) return;
                 libraryItemsContainer.innerHTML = ''; // Clear existing items
                 playlists.forEach(name => libraryItemsContainer.appendChild(createPlaylistElement(name)));
             }

             function handleCreatePlaylist() {
                 // Check if logged in before allowing playlist creation
                 if (!localStorage.getItem(LS_LOGGED_IN_KEY)) {
                     openModal(loginModal); // Prompt login if not logged in
                     return;
                 }
                 playlistCounter++;
                 const newPlaylistName = `My Playlist #${playlistCounter}`;
                 playlists.push(newPlaylistName);
                 savePlaylists();
                 libraryItemsContainer.appendChild(createPlaylistElement(newPlaylistName));
             }


            // --- RENDER VIEWS ---
            function renderHomeView() {
                if (!mainViewContainer) return;
                const isLoggedIn = !!localStorage.getItem(LS_LOGGED_IN_KEY);
                const greeting = isLoggedIn ? `Welcome back, ${localStorage.getItem(LS_USER_KEY)?.split('@')[0] || 'User'}!` : 'Welcome to SonicWave!';

                mainViewContainer.innerHTML = `
                    <section class="content-section" id="greeting-section" style="padding-bottom: 0;">
                       <h1 style="font-size: 2rem; font-weight: 700; margin-bottom: 24px;">${greeting}</h1>
                    </section>
                    <section class="content-section" id="trending-songs-section">
                        <div class="section-header"><h2 class="section-title">Trending songs</h2><a href="#" class="show-all-link">Show all</a></div>
                        <div class="card-container">
                             <!-- Cards remain the same -->
                             <div class="card" data-type="song" data-title="Finding Her" data-artist="Kushagra, Bharath, Saaheal"><img src="https://i.scdn.co/image/ab67616d00001e0283141000ee8ce3b893a0b425" alt="Finding Her" class="card-image"><h3 class="card-title">Finding Her</h3><p class="card-description">Kushagra, Bharath, Saaheal</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                             <div class="card" data-type="song" data-title="Pal Pal" data-artist="Afusic, AliSoomroMusic"><img src="https://i.scdn.co/image/ab67616d00001e0285c5968be0d0d9c545241124" alt="Pal Pal" class="card-image"><h3 class="card-title">Pal Pal</h3><p class="card-description">Afusic, AliSoomroMusic</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                             <div class="card" data-type="song" data-title="Koi Naa" data-artist="Tanishk Bagchi, Gifty, Harnoor"><img src="https://i.scdn.co/image/ab67616d00001e0298afca41c23a0f927ea9e327" alt="Koi Naa" class="card-image"><h3 class="card-title">Koi Naa</h3><p class="card-description">Tanishk Bagchi, Gifty, Harnoor</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                             <div class="card" data-type="song" data-title="Khudaya Ishq" data-artist="Arijit Singh, Shilpa Rao"><img src="https://i.scdn.co/image/ab67616d00001e02cfce51c559e5d4a7d6584c5d" alt="Khudaya Ishq" class="card-image"><h3 class="card-title">Khudaya Ishq</h3><p class="card-description">Arijit Singh, Shilpa Rao</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                             <div class="card" data-type="song" data-title="Supreme" data-artist="Shubh"><img src="https://i.scdn.co/image/ab67616d00001e02caee3f6563eb76d2fa902561" alt="Supreme" class="card-image"><h3 class="card-title">Supreme</h3><p class="card-description"><span class="explicit-icon">E</span> Shubh</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                             <div class="card" data-type="song" data-title="Khatole (Lofi Mix)" data-artist="Masoom Sharma"><img src="https://i.scdn.co/image/ab67616d00001e024c81f86297c2e3fac6a4c6cd" alt="Khatole" class="card-image"><h3 class="card-title">Khatole (Lofi Mix)</h3><p class="card-description">Masoom Sharma</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                             <div class="card" data-type="song" data-title="Summer Vibes" data-artist="Chill Masters"><img src="https://i.scdn.co/image/ab67706f00000002a8a5b57878e1341b038affa6" alt="Summer Vibes" class="card-image"><h3 class="card-title">Summer Vibes</h3><p class="card-description">Chill Masters</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                             <div class="card" data-type="song" data-title="Midnight Drive" data-artist="Synthwave Dreams"><img src="https://i.scdn.co/image/ab67616d00001e0253ec42d6800a626cb199b64d" alt="Midnight Drive" class="card-image"><h3 class="card-title">Midnight Drive</h3><p class="card-description">Synthwave Dreams</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                        </div>
                    </section>
                    <section class="content-section" id="popular-artists-section">
                        <div class="section-header"><h2 class="section-title">Popular artists</h2><a href="#" class="show-all-link">Show all</a></div>
                        <div class="card-container">
                             <!-- Cards remain the same -->
                             <div class="card artist-card" data-type="artist" data-title="Pritam" data-artist="Artist"><img src="https://i.scdn.co/image/ab67616100005174cb6926f44f620555ba444fca" alt="Pritam" class="card-image"><h3 class="card-title">Pritam</h3><p class="card-description">Artist</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                             <div class="card artist-card" data-type="artist" data-title="Arijit Singh" data-artist="Artist"><img src="https://i.scdn.co/image/ab676161000051745ba2d75eb08a2d672f9b69b7" alt="Arijit Singh" class="card-image"><h3 class="card-title">Arijit Singh</h3><p class="card-description">Artist</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                             <div class="card artist-card" data-type="artist" data-title="A.R. Rahman" data-artist="Artist"><img src="https://i.scdn.co/image/ab67616100005174b19af0ea736c6228d6eb539c" alt="A.R. Rahman" class="card-image"><h3 class="card-title">A.R. Rahman</h3><p class="card-description">Artist</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                             <div class="card artist-card" data-type="artist" data-title="Sachin-Jigar" data-artist="Artist Duo"><img src="https://i.scdn.co/image/ab67616100005174b69f6182a27407318b632a5f" alt="Sachin-Jigar" class="card-image"><h3 class="card-title">Sachin-Jigar</h3><p class="card-description">Artist Duo</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                             <div class="card artist-card" data-type="artist" data-title="Vishal-Shekhar" data-artist="Artist Duo"><img src="https://i.scdn.co/image/ab6761610000517490b6c3d093f9b02aad628eaf" alt="Vishal-Shekhar" class="card-image"><h3 class="card-title">Vishal-Shekhar</h3><p class="card-description">Artist Duo</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                             <div class="card artist-card" data-type="artist" data-title="Atif Aslam" data-artist="Artist"><img src="https://i.scdn.co/image/ab67616100005174c40600e02356cc86f0debe84" alt="Atif Aslam" class="card-image"><h3 class="card-title">Atif Aslam</h3><p class="card-description">Artist</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                             <div class="card artist-card" data-type="artist" data-title="Anirudh Ravichander" data-artist="Artist"><img src="https://i.scdn.co/image/ab676161000051740f0be2054fe9594026a6b843" alt="Anirudh Ravichander" class="card-image"><h3 class="card-title">Anirudh Ravichander</h3><p class="card-description">Artist</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                             <div class="card artist-card" data-type="artist" data-title="Udit Narayan" data-artist="Artist"><img src="https://i.scdn.co/image/ab676161000051748de0e6e7e55d7773931ab7f4" alt="Udit Narayan" class="card-image"><h3 class="card-title">Udit Narayan</h3><p class="card-description">Artist</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                              <div class="card artist-card" data-type="artist" data-title="Sachet-Parampara" data-artist="Artist Duo"><img src="https://i.scdn.co/image/ab676161000051749415df28058107b5d54f9fad" alt="Sachet-Parampara" class="card-image"><h3 class="card-title">Sachet-Parampara</h3><p class="card-description">Artist Duo</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                              <div class="card artist-card" data-type="artist" data-title="Yo Yo Honey Singh" data-artist="Artist"><img src="https://i.scdn.co/image/ab67616100005174bc7e4fffd515b47ff1ebbc1f" alt="Yo Yo Honey Singh" class="card-image"><h3 class="card-title">Yo Yo Honey Singh</h3><p class="card-description">Artist</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                        </div>
                    </section>`;
                 mainContentArea.scrollTop = 0; // Scroll to top on view change
            }

            function renderPodcastsView() {
                if (!mainViewContainer) return;
                mainViewContainer.innerHTML = `
                    <section class="content-section" id="podcasts-section">
                        <div class="section-header"><h2 class="section-title">Podcasts & Shows</h2></div>
                        <div class="card-container">
                            <!-- Cards remain the same -->
                            <div class="card podcast-card" data-type="podcast" data-title="Tech Talks Weekly" data-artist="Tech Hub"><img src="https://i.scdn.co/image/ab6765630000ba8ae2f1a4f59db68c3895bab4f6" alt="Tech Talks Weekly" class="card-image"><h3 class="card-title">Tech Talks Weekly</h3><p class="card-description">Tech Hub</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                            <div class="card podcast-card" data-type="podcast" data-title="The Daily Story" data-artist="News Network"><img src="https://i.scdn.co/image/ab6765630000ba8ac209144b2c67a524fcbaa70c" alt="The Daily Story" class="card-image"><h3 class="card-title">The Daily Story</h3><p class="card-description">News Network</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                            <div class="card podcast-card" data-type="podcast" data-title="Comedy Hour" data-artist="Laugh Central"><img src="https://i.scdn.co/image/ab67616d0000b2733dd4d3d27bb8e4e37502e5cb" alt="Comedy Hour" class="card-image"><h3 class="card-title">Comedy Hour</h3><p class="card-description">Laugh Central</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                            <div class="card podcast-card" data-type="podcast" data-title="Mindful Moments" data-artist="Zen Studios"><img src="https://i.scdn.co/image/ab67616d00001e0294d0c8c180cbecb191f63aa7" alt="Mindful Moments" class="card-image"><h3 class="card-title">Mindful Moments</h3><p class="card-description">Zen Studios</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                            <div class="card podcast-card" data-type="podcast" data-title="History Uncovered" data-artist="Past Times Inc."><img src="https://i.scdn.co/image/ab67656300005f1f5aea03dc1a177c77e0a77cc2" alt="History Uncovered" class="card-image"><h3 class="card-title">History Uncovered</h3><p class="card-description">Past Times Inc.</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                            <div class="card podcast-card" data-type="podcast" data-title="Startup Journeys" data-artist="Entrepreneur Zone"><img src="https://i.scdn.co/image/ab67656300005f1f346c90f17c7bdb02cfafb856" alt="Startup Journeys" class="card-image"><h3 class="card-title">Startup Journeys</h3><p class="card-description">Entrepreneur Zone</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                            <div class="card podcast-card" data-type="podcast" data-title="Global Gastronomy" data-artist="Foodie World"><img src="https://i.scdn.co/image/ab67656300005f1fa0d09110c1b2e3a4dead437d" alt="Global Gastronomy" class="card-image"><h3 class="card-title">Global Gastronomy</h3><p class="card-description">Foodie World</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                            <div class="card podcast-card" data-type="podcast" data-title="True Crime Chronicles" data-artist="Detective Desk"><img src="https://i.scdn.co/image/ab67656300005f1f76f3ca0a28a1f15fe0646ac8" alt="True Crime Chronicles" class="card-image"><h3 class="card-title">True Crime Chronicles</h3><p class="card-description">Detective Desk</p><button class="play-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon play-icon"><path d="M8 5v14l11-7z"></path></svg></button></div>
                        </div>
                    </section>`;
                 mainContentArea.scrollTop = 0; // Scroll to top on view change
            }

            function renderSearchView() {
                if (!mainViewContainer) return;
                // Combine Podcasts view with the search input focus
                renderPodcastsView();
                // Focus the main search bar when navigating to search via sidebar
                 searchInput?.focus();
                 mainContentArea.scrollTop = 0; // Scroll to top
            }

             // --- EVENT LISTENERS ---
            loginBtnHeader?.addEventListener('click', () => openModal(loginModal));
            signupBtnHeader?.addEventListener('click', () => openModal(signupModal));
            signupBtnFooter?.addEventListener('click', () => openModal(signupModal));
            logoutLink?.addEventListener('click', handleLogout);
            addPlaylistBtn?.addEventListener('click', handleCreatePlaylist);
            createPlaylistCtaBtn?.addEventListener('click', handleCreatePlaylist);

            // Link logo to home view
            logoLink?.addEventListener('click', (e) => {
                e.preventDefault();
                renderHomeView();
            });

            // Navigation buttons
            navHomeBtn?.addEventListener('click', (e) => {
                e.preventDefault();
                renderHomeView();
            });
            navSearchBtn?.addEventListener('click', (e) => {
                e.preventDefault();
                renderSearchView(); // Use specific search view function
            });
             browsePodcastsCtaBtn?.addEventListener('click', (e) => {
                e.preventDefault();
                renderPodcastsView(); // Make CTA also render podcasts
             });

            // Modal close/switch logic
            closeButtons.forEach(button => {
                button.addEventListener('click', () => closeModal(button.closest('.modal-overlay')));
            });
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', (event) => {
                    if (event.target === overlay) closeModal(overlay);
                });
            });
            loginForm?.addEventListener('submit', handleLogin);
            signupForm?.addEventListener('submit', handleSignup);
            switchToSignupLink?.addEventListener('click', (e) => {
                e.preventDefault();
                closeModal(loginModal);
                openModal(signupModal);
            });
            switchToLoginLink?.addEventListener('click', (e) => {
                e.preventDefault();
                closeModal(signupModal);
                openModal(loginModal);
            });

            // Search Input Filtering
            searchInput?.addEventListener('input', (event) => {
                 const searchTerm = event.target.value.toLowerCase().trim();
                 const currentCards = mainViewContainer.querySelectorAll('.card');

                 // If search term is empty, ensure all cards are visible (remove hidden class)
                 if (searchTerm === '') {
                     currentCards.forEach(card => card.classList.remove('hidden'));
                     return;
                 }

                 // Filter cards based on search term
                 currentCards.forEach(card => {
                     const title = card.dataset.title?.toLowerCase() || '';
                     const artistOrDesc = (card.querySelector('.card-description')?.textContent || card.dataset.artist || '').toLowerCase();
                     const isMatch = title.includes(searchTerm) || artistOrDesc.includes(searchTerm);
                     card.classList.toggle('hidden', !isMatch);
                 });
            });

            // Card Click (Simulated Play)
            mainViewContainer?.addEventListener('click', (event) => {
                 const clickedCard = event.target.closest('.card');
                 if (clickedCard && nowPlayingArea) {
                     const type = clickedCard.dataset.type;
                     const title = clickedCard.dataset.title;
                     const artist = clickedCard.dataset.artist;

                      // Update the "now playing" area (in the bottom banner for logged-out users)
                      if (!body.classList.contains('logged-in')) {
                         nowPlayingArea.innerHTML = `Now Playing: <strong>${title}</strong> by ${artist}`;
                     } else {
                         // In a real logged-in scenario, you'd update a dedicated player bar
                         // For this demo, we can still update the placeholder or log it
                         console.log(`Playing: ${title} by ${artist}`);
                         // Optionally update a dedicated player UI element if you add one for logged-in state
                         nowPlayingArea.innerHTML = `Simulating play: <strong>${title}</strong>`; // Example update even when logged in
                     }

                     // Highlight the playing card
                     mainViewContainer.querySelectorAll('.card').forEach(card => card.classList.remove('is-playing'));
                     clickedCard.classList.add('is-playing');
                 }
            });


            // --- INITIALIZATION ---
            checkLoginStatus();
            loadPlaylists();
            renderHomeView(); // Start on the home view
        });
    </script>

</body>
</html>
